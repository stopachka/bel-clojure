{"version":3,"sources":["cljs_test_display/notify.cljs"],"mappings":";;;;AAKA,AAAKA,wCAAa,iEAAA,jEAACC,qDAASC;AAE5B,2CAAA,3CAAMC,8FAAiBC,KAAKC;AAA5B,AACE,oBAAML;AAAN,AACE,GAAM,AAACM,6CAAEF,KAAK,2FAAA,3FAACH,qDAASD;AAAxB,AACE,QAACK,sCAAAA,wCAAAA;;AADH;;;AADF;;;AAIF,gDAAA,hDAAME;AAAN,AACE,gDAAA,UAAA,nDAACJ;AAAD,AACG,OAAoBH;;;AAEzB,AAAKQ,mCAAQ,yCAAA,OAAA,hDAACC;AACd,AAAKC,qCAAU,yCAAA,OAAA,hDAACD;AAEhB,mCAAA,nCAAME;AAAN,AACE,gDAAA,UAAA,nDAACR;AAAD,AACG,YAAAS,aAAA,wBAAA,wDAAA,9CAC6BF;;;AAElC,mCAAA,2CAAAG,9EAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;YAAA,AAAAE,4CAAAF,eAAA,nEAAuBI;WAAvB,AAAAF,4CAAAF,eAAA,lEAA6BK;AAA7B,AACE,gDAAA,UAAA,nDAAChB;AAAD,AACG,YAAAS,aAAA,oBAAA,sDAAA,5CAC6BJ,0DAEA,CACC,wBAAA,0EAAA,hFAAMW,MACJ,mDAAA,NAAKA,mCACP,yBAAA,wEAAA,/EAAMD,OACJ,oDAAA,PAAKA","names":["cljs-test-display.notify/notification","cljs_test_display.notify.goog$module$goog$object.get","js/goog.global","cljs-test-display.notify/with-permission","perm","thunk","cljs.core._EQ_","cljs-test-display.notify/ask-permission!","cljs-test-display.notify/red-url","cljs-test-display.favicon/color-data-url","cljs-test-display.notify/green-url","cljs-test-display.notify/success","js/Notification","p__22337","map__22338","cljs.core/--destructure-map","cljs.core.get","cljs-test-display.notify/failure","error","fail"],"sourcesContent":["(ns cljs-test-display.notify\n  (:require\n   [cljs-test-display.favicon :as favicon]\n   [goog.object :as gobj]))\n\n(def notification (gobj/get goog.global \"Notification\"))\n\n(defn with-permission [perm thunk]\n  (when notification\n    (when (= perm (gobj/get notification \"permission\"))\n      (thunk))))\n\n(defn ask-permission! []\n  (with-permission \"default\"\n    #(.requestPermission notification)))\n\n(def red-url (favicon/color-data-url \"#d00\" 512))\n(def green-url (favicon/color-data-url \"#0d0\" 512))\n\n(defn success []\n  (with-permission \"granted\"\n    #(js/Notification. \"All CLJS Tests Passed\"\n                       #js {:icon green-url :silent true})))\n\n(defn failure [{:keys [error fail]}]\n  (with-permission \"granted\"\n    #(js/Notification. \"CLJS Tests Failed\"\n                       #js {:icon red-url\n                            :silent true\n                            :body (str\n                                   (when fail\n                                     (str fail \" failures \"))\n                                   (when error\n                                     (str error \" errors\")))})))\n\n#_(success)\n#_(failure {})\n"]}